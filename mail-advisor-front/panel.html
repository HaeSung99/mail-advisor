<div class="nm-panel">
  <div class="nm-panel__header">
    <div class="nm-panel__header-content">
      <svg class="nm-panel__logo" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z" fill="#F63E6F"/>
      </svg>
      <h3 class="nm-panel__title">메일 어드바이저</h3>
    </div>
    <button class="nm-panel__close">×</button>
  </div>
  <div class="nm-panel__content">
    <!-- 로그인/회원가입 폼 (기본 표시) -->
    <div class="nm-auth-container" id="nm-auth-form">
      <div class="nm-auth-header">
        <h2 class="nm-auth-title">환영합니다</h2>
        <p class="nm-auth-subtitle">AI 기반 메일 작성 도우미에 로그인하세요</p>
      </div>
      
      <!-- 로그인 폼 -->
      <div id="nm-login-section" class="nm-auth-section">
        <div class="nm-input-group">
          <input type="text" class="nm-input" id="nm-username" placeholder="사용자명">
        </div>
        <div class="nm-input-group">
          <input type="password" class="nm-input" id="nm-password" placeholder="비밀번호">
        </div>
        <div id="nm-login-error" class="nm-error-message" style="display: none;"></div>
        <button id="nm-login-btn" class="nm-btn nm-btn--primary">로그인</button>
        <div class="nm-auth-switch">
          <span>계정이 없으신가요?</span>
          <button id="nm-show-signup-btn" class="nm-link-btn">회원가입</button>
        </div>
      </div>
      
      <!-- 회원가입 폼 -->
      <div id="nm-signup-section" class="nm-auth-section" style="display: none;">
        <div class="nm-input-group">
          <input type="text" class="nm-input" id="nm-signup-username" placeholder="사용자명">
        </div>
        <div class="nm-input-group">
          <input type="password" class="nm-input" id="nm-signup-password" placeholder="비밀번호">
        </div>
        <div class="nm-input-group">
          <input type="password" class="nm-input" id="nm-signup-confirm" placeholder="비밀번호 확인">
        </div>
        <div id="nm-signup-error" class="nm-error-message" style="display: none;"></div>
        <button id="nm-signup-btn" class="nm-btn nm-btn--success">회원가입</button>
        <div class="nm-auth-switch">
          <span>이미 계정이 있으신가요?</span>
          <button id="nm-show-login-btn" class="nm-link-btn">로그인</button>
        </div>
      </div>
    </div>
    
    <!-- 로그인 후 메인 컨텐츠 -->
    <div id="nm-main-content" class="nm-main-container" style="display: none;">
      
      <!-- 토큰 카드 -->
      <div class="nm-card nm-card--primary">
        <div class="nm-card__header">
          <span class="nm-card__badge">보유 중</span>
          <div class="nm-token-balance" id="nm-token-balance">
            <span class="nm-token-balance__amount">0</span>
            <span class="nm-token-balance__unit">토큰</span>
          </div>
        </div>
        <button id="nm-payment-btn" class="nm-btn nm-btn--outline nm-btn--full">토큰 충전하기</button>
      </div>
      
      <!-- 메일 본문 미러링 -->
      <div class="nm-card" id="nm-mirror-section" style="display: none;">
        <div class="nm-card__title">메일 본문 미리보기</div>
        <div id="nm-mirror" class="nm-mirror-content">본문 내용이 여기에 표시됩니다...</div>
      </div>
      
      <!-- AI 설정 -->
      <div class="nm-card">
        <div class="nm-card__title">프로필 설정</div>
        <div class="nm-form-row">
          <label class="nm-label">직책</label>
          <select class="nm-select" id="nm-my-position-type">
            <option value="manager">매니저</option>
            <option value="director">이사</option>
            <option value="ceo">CEO</option>
            <option value="team-lead">팀장</option>
            <option value="senior">시니어</option>
            <option value="junior">주니어</option>
            <option value="intern">인턴</option>
            <option value="custom" class="custom-option">✏️ 직접 입력</option>
          </select>
        </div>
        <input type="text" class="nm-input nm-input--custom" id="nm-my-position-custom" placeholder="직책을 입력하세요" style="display: none;">
        
        <div class="nm-form-row">
          <label class="nm-label">업무</label>
          <select class="nm-select" id="nm-my-job-type">
            <option value="marketing">마케팅</option>
            <option value="sales">영업</option>
            <option value="hr">인사</option>
            <option value="finance">재무</option>
            <option value="it">IT/개발</option>
            <option value="design">디자인</option>
            <option value="content">콘텐츠</option>
            <option value="customer-service">고객서비스</option>
            <option value="custom" class="custom-option">✏️ 직접 입력</option>
          </select>
        </div>
        <input type="text" class="nm-input nm-input--custom" id="nm-my-job-custom" placeholder="업무를 입력하세요" style="display: none;">
      </div>
      
      <!-- 메일 설정 -->
      <div class="nm-card">
        <div class="nm-card__title">메일 구성</div>
        
        <div class="nm-form-row">
          <label class="nm-label">톤앤매너</label>
          <select class="nm-select" id="nm-tone-level-type">
            <option value="formal">정중하고 전문적인</option>
            <option value="friendly">친근하고 따뜻한</option>
            <option value="casual">편안하고 자연스러운</option>
            <option value="authoritative">권위적이고 확신있는</option>
            <option value="persuasive">설득력 있는</option>
            <option value="urgent">긴급하고 중요한</option>
            <option value="custom" class="custom-option">✏️ 직접 입력</option>
          </select>
        </div>
        <input type="text" class="nm-input nm-input--custom" id="nm-tone-level-custom" placeholder="톤앤매너를 입력하세요" style="display: none;">
        
        <div class="nm-form-row">
          <label class="nm-label">목표</label>
          <select class="nm-select" id="nm-my-goal-type">
            <option value="proposal">제안/제안서</option>
            <option value="follow-up">후속 조치</option>
            <option value="meeting">회의 요청</option>
            <option value="feedback">피드백 요청</option>
            <option value="approval">승인 요청</option>
            <option value="information">정보 공유</option>
            <option value="apology">사과</option>
            <option value="thanks">감사 인사</option>
            <option value="custom" class="custom-option">✏️ 직접 입력</option>
          </select>
        </div>
        <input type="text" class="nm-input nm-input--custom" id="nm-my-goal-custom" placeholder="목표를 입력하세요" style="display: none;">
        
        <div class="nm-form-row">
          <label class="nm-label">길이</label>
          <select class="nm-select" id="nm-length">
            <option value="similar">본문과 비슷하게</option>
            <option value="short">짧게</option>
            <option value="long">길게</option>
            <option value="optimized" selected>최적화 (추천)</option>
          </select>
        </div>
        
        <div class="nm-form-row">
          <label class="nm-label">대상</label>
          <select class="nm-select" id="nm-audience-type">
            <option value="customer">고객</option>
            <option value="colleague">동료</option>
            <option value="boss">상사</option>
            <option value="subordinate">부하직원</option>
            <option value="partner">파트너</option>
            <option value="vendor">협력업체</option>
            <option value="investor">투자자</option>
            <option value="media">언론</option>
            <option value="custom" class="custom-option">✏️ 직접 입력</option>
          </select>
        </div>
        <input type="text" class="nm-input nm-input--custom" id="nm-audience-custom" placeholder="대상을 입력하세요" style="display: none;">
      </div>
      
      <!-- AI 조언 결과 -->
      <div class="nm-card nm-card--result" id="nm-response" style="display: none;">
        <div class="nm-card__header">
          <div class="nm-card__title">AI 조언</div>
          <div class="nm-card__badge nm-card__badge--info" id="nm-token-info">0 토큰 사용</div>
        </div>
        <div class="nm-advice-content" id="nm-advice-content">조언이 여기에 표시됩니다...</div>
      </div>
      
      <!-- 액션 버튼 -->
      <div class="nm-actions">
        <button id="nm-send" class="nm-btn nm-btn--primary nm-btn--icon">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 8L8 1L15 8M8 1V11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>AI 조언 받기</span>
        </button>
        <button id="nm-apply" class="nm-btn nm-btn--success nm-btn--icon" style="display: none;">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13 4L6 11L3 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>적용하기</span>
        </button>
        <span id="nm-status" class="nm-status"></span>
      </div>
    </div>
  </div>
</div>